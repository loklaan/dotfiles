# Locale
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8
export LANGUAGE=en_US.UTF-8

# User
export DEFAULT_USER=loch
export EDITOR='idea --wait'

# Base pathing
{{ $pkg_manager_path := "" }}
{{ if eq .chezmoi.os "darwin" }}
{{ $pkg_manager_path := ":{{ .brewprefix }}/sbin:{{ .brewprefix }}/bin" }}
{{ end }}
## Tip: Shells search left to right for executables
export PATH="$HOME/.local/bin{{ $pkg_manager_path }}:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:$PATH"

# XDG
export XDG_CACHE_HOME="$HOME/Library/Caches"
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_DATA_HOME="$HOME/.local/share"

# Filesystem inodes
ulimit -n 10240 # Raises the limit for open files, which is important for large git repos
bgnotify_threshold=8

# Wsl linux display
{{ if eq .chezmoi.os "linux" -}}
{{   if (.chezmoi.kernel.osrelease | lower | contains "microsoft") -}}
# VcxSrv Display (WSL hosted UIs)
export DISPLAY=${DISPLAY:-$(grep -Po '(?<=nameserver ).*' /etc/resolv.conf):0}
{{   end -}}
{{- end }}

# Service tokens
## Github
export GITHUB_TOKEN={{ (bitwardenSecrets "13a3305b-0c71-411c-89e3-b37c016033b5").value }}

# Package managers
## Homebrew
export HOMEBREW_GITHUB_API_TOKEN=$GITHUB_TOKEN
export HOMEBREW_NO_ANALYTICS=1
export HOMEBREW_NO_EMOJI=1
export HOMEBREW_NO_INSECURE_REDIRECT=1
## Mise (shim)
eval "$(mise activate zsh --shims)"

# Language/tool chains
## Android
export ANDROID_HOME="$HOME/Library/Android/sdk"
export PATH="$ANDROID_HOME/platform-tools:$ANDROID_HOME/tools:$PATH"
## Playbook
export PLAYDATE_SDK_PATH="$HOME/Developer/PlaydateSDK"
export PATH="$PLAYDATE_SDK_PATH/bin:$PATH"
## Fly.io
export FLYCTL_INSTALL="$HOME/.fly"
export PATH="$FLYCTL_INSTALL/bin:$PATH"
## Nodejs
export NODE_MAX_OLD_SPACE_SIZE=8192
export PNPM_HOME="$HOME/.local/share/pnpm"

{{ if ne "" .emailWork -}}
# Canva-only
export JETBRAINS_LICENSE_SERVER=https://canva.fls.jetbrains.com/
{{- end }}
